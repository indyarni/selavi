<html>
<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.17.0/vis.js"></script>
</head>
<body>
bonjour monde!
<div id="vizcontainer"></div>
<script type="text/javascript">

    var msReq = new XMLHttpRequest();
    msReq.open('GET', '/selavi/microservices.json', false);
    msReq.send(null);

    var microserviceJsonNodes = JSON.parse(msReq.response);
    microserviceJsonNodes = microserviceJsonNodes.map(function(el) {
        el.color = "lightblue";
        return el;
    });

    var consumerReq = new XMLHttpRequest();
    consumerReq.open('GET', '/selavi/consumers.json', false);
    consumerReq.send(null);

    var consumerJsonNodes = JSON.parse(consumerReq.response);
    consumerJsonNodes = consumerJsonNodes.map(function(el) {
        el.color = "orange";
        return el;
    });

    var allNodes = microserviceJsonNodes.concat(consumerJsonNodes);

    // create an array with nodes
    var nodes = new vis.DataSet(allNodes);

    var edgeArray = [];

    allNodes.filter(function(el) {
        return el.consumes;
    }).forEach(function(el) {
        el.consumes.forEach(function(consumer) {
            edgeArray.push({
                from: el.id,
                to: consumer
            });
        });
    });

    var edges = new vis.DataSet(edgeArray);

    // create a network
    var container = document.getElementById('vizcontainer');
    var data = {
        nodes: nodes,
        edges: edges
    };
    var options = {
        nodes: {
            borderWidth: 2,
            shadow: true,
            font: { color: "white" }
        },
        edges: {
            width: 2,
            shadow: true
        }
    };
    var network = new vis.Network(container, data, options);

</script>
</body>
</html>